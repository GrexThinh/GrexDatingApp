<div class="card">
  <div class="card-header">
    <div class="d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center gap-2">
        <img
          class="display-user-image"
          [src]="post().user.photoUrl"
          [alt]="''"
        />
        <div>
          <div class="display-name">{{ post().user.knownAs }}</div>
          <div class="display-comment">{{ post().createDate | timeago }}</div>
        </div>
      </div>
      <div>
        <i class="fa fa-ellipsis-h"></i>
      </div>
    </div>
  </div>
  <div class="card-body">
    <p class="card-text">{{ post().content }}</p>
    <img
      *ngIf="post().photos?.[0]?.url"
      src="{{ post().photos[0].url }}"
      class="card-img-top display-image"
      alt="photo-group"
    />
  </div>

  <div class="card-footer text-muted">
    <div class="d-flex justify-content-between">
      <div>
        <i class="fa fa-heart" style="color: red"></i>
        {{ totalReactions }}
      </div>
      <div>{{ post().comments.length + totalAddedComment }} comments</div>
    </div>
    <div class="d-flex justify-content-between mt-1">
      <button
        class="btn btn-secondary w-100"
        style="
          border-top-right-radius: 0;
          border-bottom-right-radius: 0;
          border-right: 2px solid white;
        "
        [ngStyle]="{
          color: post().reactionByCurrentUser !== null ? 'red' : ''
        }"
        (click)="toggleReaction()"
      >
        <i
          class="fa"
          [ngClass]="{
            'fa-heart-o': post().reactionByCurrentUser === null,
            'fa-heart': post().reactionByCurrentUser !== null,
            }"
        ></i>
        Love</button
      ><button
        class="btn btn-secondary w-100"
        style="border-top-left-radius: 0; border-bottom-left-radius: 0"
        (click)="handleViewComment()"
      >
        <i class="fa fa-comment-o"></i> Comment
      </button>
    </div>
    <div *ngIf="isViewComment">
      <div class="overflow-y-auto" style="max-height: 400px">
        <app-add-comment
          [commentType]="commentType"
          (addedComment)="onAddedComment($event)"
        ></app-add-comment>
        <app-display-comment
          *ngFor="let comment of comments"
          [commentType]="commentType"
          [comment]="comment"
          (addedReply)="onAddedComment($event)"
        ></app-display-comment>
      </div>
    </div>
  </div>
</div>
